---
import {
  MapPin,
  Phone,
  Mail,
  Clock,
  Send,
  Facebook,
  Instagram,
  Twitter,
  Linkedin,
} from 'lucide-react';
import { motion } from 'framer-motion';
import MainLayout from '../layouts/MainLayout.astro';
import { Icon } from 'astro-icon/components';

const CONTACT_INFO = [
  {
    icon: MapPin,
    title: 'Posetite nas',
    titleEn: 'Visit Us',
    details: ['Skerliceva 23, Kragujevac'],
    color: 'var(--blue-600)',
  },
  {
    icon: Phone,
    title: 'Pozovite nas',
    titleEn: 'Call Us',
    details: ['+(381) 60 322-3861'],
    color: 'var(--green-600)',
  },
  {
    icon: Mail,
    title: 'Pisite nam',
    titleEn: 'Email Us',
    details: ['adrijanasmedia@gmail.com'],
    color: 'var(--purple-600)',
  },
  {
    icon: Clock,
    title: 'Radno vreme',
    titleEn: 'Working Hours',
    details: ['Pon-Pet: 8:00 - 20:00', 'Sub-Ned: 9:00 - 18:00'],
    color: 'var(--orange-600)',
  },
];

const SOCIAL_LINKS = [
  { icon: Facebook, href: '#', color: 'var(--blue-600)' },
  { icon: Instagram, href: '#', color: 'var(--pink-600)' },
  { icon: Twitter, href: '#', color: 'var(--blue-400)' },
  { icon: Linkedin, href: '#', color: 'var(--blue-700)' },
];
---

<MainLayout
  title="Autoskola Laufer"
  description="Contact us page"
  mainLink="/contact"
>
  <div class="container">
    <!-- Hero Section -->
    <div class="hero">
      <div class="hero-overlay">
        <div class="texture-overlay"></div>
        <div class="gradient-overlay"></div>
      </div>
      <div class="hero-content">
        <div class="hero-text">
          <motion.div
            client:load
            initial={{ opacity: 0, y: 20 }}
            animate={{ opacity: 1, y: 0 }}
            className="contact-badge"
          >
            <b class="cta-contact" id="cta-contact">
              <Mail className="icon" />
              <span>Kontaktirajte nas</span>
            </b>
          </motion.div>

          <motion.h1
            client:load
            initial={{ opacity: 0, y: 20 }}
            animate={{ opacity: 1, y: 0 }}
            transition={{ delay: 0.1 }}
            className="title"
          >
            Stupite u <span class="highlight">kontakt</span>
          </motion.h1>

          <motion.p
            client:load
            initial={{ opacity: 0, y: 20 }}
            animate={{ opacity: 1, y: 0 }}
            transition={{ delay: 0.2 }}
            className="subtitle"
          >
            Imate pitanja o nasim kursevima voznje? Tu smo da vam pomognemo da
            postanete siguran i bezbedan vozac.
          </motion.p>
        </div>
      </div>
    </div>

    <!-- Contact Information Cards -->
    <div class="info-cards">
      <div class="cards-grid">
        {
          CONTACT_INFO.map((item, index) => (
            <motion.div
              client:load
              initial={{ opacity: 0, y: 20 }}
              animate={{ opacity: 1, y: 0 }}
              transition={{ delay: index * 0.1 }}
              className="card"
            >
              <div class="icon-wrapper">
                <item.icon className="icon" />
              </div>
              <h3>{item.title}</h3>
              <div class="details">
                {item.details.map((detail) => (
                  <p>{detail}</p>
                ))}
              </div>
            </motion.div>
          ))
        }
      </div>
    </div>

    <div class="content-section">
      <b class="content-grid">
        <!-- Contact Form -->
        <motion.div
          client:load
          initial={{ opacity: 0, x: -20 }}
          animate={{ opacity: 1, x: 0 }}
          className="form-container"
        >
          <h2>Posaljite nam poruku</h2>
          <form method="POST" id="form" class="contact-form">
            <div class="form-grid">
              <div class="form-group">
                <label for="name">Ime i prezime</label>
                <input
                  type="text"
                  id="name"
                  name="name"
                  required
                  placeholder="Petar Petrovic"
                />
                <p class="error-message" id="fullNameError"></p>
              </div>

              <div class="form-group">
                <label for="email">Email adresa</label>
                <input
                  type="email"
                  id="email"
                  name="email"
                  required
                  placeholder="petar@example.com"
                />
                <p class="error-message" id="emailError"></p>
              </div>
            </div>

            <div class="form-grid">
              <div class="form-group">
                <label for="phone">Broj telefona</label>
                <input
                  type="tel"
                  id="phone"
                  name="phone"
                  required
                  placeholder="(647) 555-0123"
                />
                <p class="error-message" id="phoneError"></p>
              </div>

              <div class="form-group">
                <label for="licenseType">Tip dozvole</label>
                <select id="licenseType" name="licenseType" required>
                  <option value="">Izaberite tip dozvole</option>
                  <option value="G1">G1 dozvola</option>
                  <option value="G2">G2 dozvola</option>
                  <option value="G">G dozvola</option>
                  <option value="International">Medjunarodna dozvola</option>
                </select>
              </div>
            </div>

            <div class="form-group">
              <label for="message">Poruka</label>
              <textarea
                id="message"
                name="message"
                rows="4"
                required
                placeholder="Kako mozemo da vam pomognemo?"></textarea>
              <p class="error-message" id="messageError"></p>
            </div>

            <button type="submit" class="submit-button">
              Posalji poruku
            </button>
            <div class="result" id="result"></div>
          </form>
        </motion.div>
        <!-- Map and Social Links -->
        <motion.div
          client:load
          initial={{ opacity: 0, x: 20 }}
          animate={{ opacity: 1, x: 0 }}
          className="sidebar"
        >
          <!-- Map -->
          <div class="mapouter">
            <div class="gmap_canvas">
              <iframe
                class="gmap_iframe"
                frameborder="0"
                scrolling="no"
                marginheight="0"
                marginwidth="0"
                src="https://maps.google.com/maps?width=600&height=400&hl=en&q=kragujevac skerliceva 23&t=&z=14&ie=UTF8&iwloc=B&output=embed"
              ></iframe>
            </div>
          </div>

          <!-- Social Links -->
          <div class="social-container">
            <h3>Pratite nas</h3>
            <p>
              Ostanite povezani sa nama na drustvenim mrezama za najnovije
              novosti, savete za voznju i posebne ponude.
            </p>
            <div class="wrap">
              <div class="icon-mod">
                <a
                  href="https://www.facebook.com/p/Auto-Skola-Laufer-Auto-100063596634859/?locale=sr_RS"
                  target="_blank"
                >
                  <Icon
                    name="line-md--facebook"
                    height="20px"
                    width="20px"
                    color="#2c3149"
                  /></a
                >
              </div>
              <div class="icon-mod">
                <a
                  href="https://www.instagram.com/kragujevacautoskola/"
                  target="_blank"
                  ><Icon
                    name="line-md--instagram"
                    height="20px"
                    width="20px"
                    color="#2c3149"
                  /></a
                >
              </div>
              <div class="icon-mod">
                <a
                  href="https://www.tiktok.com/@kragujevacautoskola"
                  target="_blank"
                  ><Icon
                    name="line-md--tiktok"
                    height="20px"
                    width="20px"
                    color="#2c3149"
                  /></a
                >
              </div>
            </div>
          </div>
        </motion.div>
      </b>
    </div>
    <script>
      const handleScrollToContentGrid = () => {
        const targetElement = document.querySelector('.content-grid');
        if (targetElement) {
          targetElement.scrollIntoView({ behavior: 'smooth' });
        }
      };
      const ctaContact = document.querySelector('#cta-contact');
      if (ctaContact) {
        ctaContact.addEventListener('click', () => {
          const targetElement = document.querySelector('.cards-grid');
          if (targetElement) {
            targetElement.scrollIntoView({ behavior: 'smooth' });
          }
        });
      }

      const form = document.getElementById('form') as HTMLFormElement;
      const result = document.getElementById('result');
      if (form)
        form.addEventListener('submit', function (e) {
          const formData = new FormData(form);
          e.preventDefault();
          const object = Object.fromEntries(formData);
          const json = JSON.stringify(object);

          if (result) {
            result.innerHTML = 'Please wait...';

            fetch('https://api.web3forms.com/submit', {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json',
                Accept: 'application/json',
              },
              body: json,
            })
              .then(async (response) => {
                let json = await response.json();
                if (response.status == 200) {
                  result.innerHTML = json.message;
                } else {
                  console.log(response);
                  result.innerHTML = json.message;
                }
              })
              .catch((error) => {
                console.log(error);
                result.innerHTML = 'Something went wrong!';
              })
              .then(function () {
                form.reset();
                setTimeout(() => {
                  result.style.display = 'none';
                }, 3000);
              });
          }
        });
    </script>
    <style>
      :root {
        --primary-color: #2c3149;
        --secondary-color: #1a1f33;
        --yellow-500: #eab308;
        --blue-600: #2563eb;
        --green-600: #16a34a;
        --purple-600: #9333ea;
        --orange-600: #ea580c;
        --pink-600: #db2777;
        --blue-400: #60a5fa;
        --blue-700: #1d4ed8;
      }

      .container {
        min-height: 100vh;
        background-color: #f9fafb;
      }

      .hero {
        position: relative;
        padding: 7rem 0 5rem;
        background-color: var(--primary-color);
        overflow: hidden;
      }

      .hero-overlay {
        position: absolute;
        inset: 0;
      }

      .texture-overlay {
        position: absolute;
        inset: 0;
        /* background-image: url('/patterns/texture-dots.png'); */
        opacity: 0.03;
      }

      .gradient-overlay {
        position: absolute;
        inset: 0;
        background: linear-gradient(to bottom right, #0d1435, #1e2968, #232947);
      }

      .hero-content {
        position: relative;
        max-width: 80rem;
        margin: 0 auto;
        padding: 0 1rem;
      }

      .hero-text {
        text-align: center;
        max-width: 48rem;
        margin: 0 auto;
      }

      .contact-badge {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.5rem 1rem;
        border-radius: 9999px;
        background-color: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(4px);
        border: 1px solid rgba(255, 255, 255, 0.2);
        margin-bottom: 1.5rem;
        cursor: pointer;
      }

      .contact-badge .icon {
        width: 1.25rem;
        height: 1.25rem;
        color: var(--yellow-500);
      }

      .contact-badge span {
        color: white;
        font-weight: 500;
      }

      .title {
        font-size: 3rem;
        font-weight: 700;
        color: white;
        margin-bottom: 1.5rem;
      }

      @media (min-width: 640px) {
        .title {
          font-size: 3.75rem;
        }
      }

      @media (min-width: 768px) {
        .title {
          font-size: 4.5rem;
        }
      }

      .title .highlight {
        color: var(--yellow-500);
      }

      .subtitle {
        font-size: 1.125rem;
        color: #d1d5db;
        margin-bottom: 2rem;
      }

      @media (min-width: 640px) {
        .subtitle {
          font-size: 1.25rem;
        }
      }

      .info-cards {
        max-width: 80rem;
        margin: -4rem auto 0;
        padding: 0 1rem;
        position: relative;
        z-index: 10;
      }

      .cards-grid {
        display: grid;
        grid-template-columns: 1fr;
        gap: 1.5rem;
      }

      @media (min-width: 768px) {
        .cards-grid {
          grid-template-columns: repeat(2, 1fr);
        }
      }

      @media (min-width: 1024px) {
        .cards-grid {
          grid-template-columns: repeat(4, 1fr);
        }
      }

      .card {
        background-color: white;
        border-radius: 1rem;
        padding: 1.5rem;
        border: 1px solid #e5e7eb;
        box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
      }

      .icon-wrapper {
        display: inline-block;
        border-radius: 0.75rem;
        background-color: rgba(182, 177, 164, 0.1);
      }

      .icon-wrapper .icon {
        width: 1.5rem;
        height: 1.5rem;
        color: var(--yellow-500);
      }

      .card h3 {
        margin-top: 1rem;
        font-weight: 600;
        color: var(--primary-color);
      }

      .details {
        margin-top: 0.5rem;
        space-between: 0.25rem;
      }

      .details p {
        color: #4b5563;
      }

      .content-section {
        max-width: 80rem;
        margin: 0 auto;
        padding: 4rem 1rem;
      }

      .content-grid {
        display: grid;
        grid-template-columns: 1fr;
        gap: 4rem;
      }

      @media (min-width: 1024px) {
        .content-grid {
          grid-template-columns: repeat(2, 1fr);
        }
      }

      .form-container {
        background-color: white;
        border-radius: 1rem;
        padding: 2rem;
        border: 1px solid #e5e7eb;
        box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
      }

      .form-container h2 {
        font-size: 1.5rem;
        font-weight: 600;
        color: var(--primary-color);
        margin-bottom: 1.5rem;
      }

      .contact-form {
        display: flex;
        flex-direction: column;
        gap: 1rem;
      }

      .form-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 1rem;
      }
      .form-group {
        display: flex;
        flex-direction: column;
      }
      .form-group label {
        font-weight: bold;
        margin-bottom: 0.5rem;
      }
      .contact-form input,
      .contact-form select,
      .contact-form textarea {
        padding: 0.75rem;
        border: 1px solid #ddd;
        border-radius: 0.5rem;
        font-size: 1rem;
      }
      .submit-button {
        padding: 0.75rem;
        background-color: var(--blue-600);
        color: white;
        font-weight: bold;
        border: none;
        border-radius: 0.5rem;
        cursor: pointer;
        transition: background-color 0.3s ease;
      }
      .submit-button:hover {
        background-color: var(--blue-700);
      }
      @media (min-width: 768px) {
        .form-grid {
          grid-template-columns: 1fr;
        }
      }

      .form-group {
        display: flex;
        flex-direction: column;
        gap: 0.25rem;
      }

      .form-group label {
        display: block;
        font-size: 0.875rem;
        font-weight: 500;
        color: var(--text-color);
        margin-bottom: 0.25rem;
      }

      .form-group input,
      .form-group select,
      .form-group textarea {
        width: 100%;
        padding: 0.75rem 1rem;
        border-radius: 0.75rem;
        border: 1px solid #e5e7eb;
        transition: all 0.2s;
      }

      .form-group input:focus,
      .form-group select:focus,
      .form-group textarea:focus {
        outline: none;
        border-color: var(--accent-color);
        box-shadow: 0 0 0 3px rgba(251, 191, 36, 0.2);
      }

      .submit-button {
        width: 100%;
        background-color: var(--primary-color);
        color: white;
        padding: 0.75rem 1rem;
        cursor: pointer;
        border-radius: 6px;
      }
      .cta-contact {
        display: flex;
        justify-content: center;
        gap: 6px;
      }
      .mapouter {
        position: relative;
        width: 100%;
        padding-bottom: 100%;
      }
      .gmap_canvas {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
      }
      .gmap_iframe {
        width: 100%;
        height: 100%;
        border: 0;
      }
      .social-container {
        display: flex;
        flex-direction: column;
        background-color: white;
        border-radius: 1rem;
        padding: 2rem;
        border: 1px solid #e5e7eb;
        box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
        margin-top: 2rem;
        color: #2c3149;
      }
      .wrap {
        display: flex;
        gap: 6px;
        margin-top: 12px;
      }
      label {
        color: #2c3149;
      }
    </style>
  </div>
</MainLayout>
